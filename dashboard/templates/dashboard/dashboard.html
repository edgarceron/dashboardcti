{% extends 'maingui/index.html' %}
{% load static %}
{% block title %}
    Consola
{% endblock %}
{% block topTitle %}
    Consola
{% endblock %}
{% block content %}

<div class='modal fade' tabindex='-1' role='dialog' id='successModal'>
    <div class='modal-dialog text-dark' style="max-width: 80%;" role='document'>
        <div class='modal-content'>
                <div class='modal-header'>
                    <div class="row w-100">
                        <div class="col-md-10">
                            <h3 class='modal-title' id='modalTitle'>Llamada entrante</h3>
                        </div>
                        <div class="col-md-2">
                            <div class='form-group'>
                                <button type="button" class="btn btn-primary" id="editar">
                                    Editar datos
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
                <div class='modal-body'>
                    <div class="row">
                        <div class="col-md-12">
                            <h5 class="text-right" id="phoneText">AQUI TELEFONO ENTRANTE</h5>
                        </div>
                        <div class="col-md-12">
                            <div class="text-right">
                                <h5 class="text-right">Cedula ingresada: 
                                    <span class="font-weight-bold" id="identificacionText">
                                        1144166082
                                    </span>
                                </h5>
                            </div>
                        </div>
                        
                        <div class="col-md-12">
                            <h5 class="font-weight-bold">Datos registrados: </h5>
                            <div class="card">
                                <div class="row">
                                    <div class="col-md-6">
                                        <p>Nombre: <span id="nombresText"></span></p>
                                        <p>Apellido: 
                                            <span id="primer_apellidoText"></span>
                                            <span id="segundo_apellidoText"></span>
                                        </p>
                                        <p>Teléfono: <span id="telefonoText"></span></p>
                                        <p>E-mail: <span id="emailText"></span></p>
                                    </div>
                                    <div class="col-md-6">
                                        <p>Direccion: <span id="direccionText"></span></p>
                                        <p>Departamento: <span id="departamentoText"></span></p>
                                        <span id="municipio"></span>
                                    </div>
                                </div>
                                
                            </div>
                        </div>
                        <div class="col-md-12">
                            <h5 class="font-weight-bold">Seguimiento</h5>
                            <div class="card">
                                <p><a href="#">Reclamación datos erroneos CUN: 000000000000</a></p>
                                <p><a href="#">Reclamación mala atención personal CUN: 000000000000</a></p>
                                <p><a href="#">Reclamación estafa CUN: 000000000000</a></p>
                            </div>
                        </div>

                        <div class="col-md 12">
                            <div class='form-group'>
                                <button type="button" class="btn btn-primary" id="agregar">
                                    Registrar nueva solicitud
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
        </div>
    </div>
</div>

<div class='modal fade' tabindex='-1' role='dialog' id='newModal'>
    <div class='modal-dialog text-dark' style="max-width: 80%;" role='document'>
        <div class='modal-content'>
                <div class='modal-header'>
                    <div class="row w-100">
                        <div class="col-md-10">
                            <h3 class='modal-title' id='modalTitle'>Llamada entrante</h3>
                        </div>
                        <div class="col-md-2">
                            <div class='form-group'>
                                <a class="btn btn-info" href="{% url 'create_datos' %}">
                                    Agregar datos
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
                <div class='modal-body'>
                    <div class="row">
                        <div class="col-md-12">
                            <h5 class="text-right" id="phoneText2">AQUI TELEFONO ENTRANTE</h5>
                        </div>
                        <div class="col-md-12">
                            <div class="text-right">
                                <h5 class="text-right">Cedula ingresada: 
                                    <span class="font-weight-bold" id="identificacionText">
                                        No ingreso cedula
                                    </span>
                                </h5>
                            </div>
                        </div>
                        
                        <div class="col-md-12">
                            <h5 class="font-weight-bold">Datos registrados: </h5>
                            <h5 class="font-weight-bold">No hay datos registrados </h5>
                            <div class="row">
                                <div class="col-md-6">
                                    <div class="form-group">
                                        <label for="municipioInput">Buscar por cedula</label>
                                        <input type="text" class="form-control appform" id="cedulaInput" required>
                                        <button type="button" class="btn btn-primary" id="buscar">
                                            Buscar por cedula 
                                        </button>
                                    </div>                                        
                                </div>
                            </div>
                            
                        </div>
                        <div class="col-md-12">
                            <h5 class="font-weight-bold">Seguimiento</h5>
                            <div class="card">
                                No hay seguimiento
                            </div>
                        </div>

                        <div class="col-md 12">
                            <div class='form-group'>
                                <button type="button" class="btn btn-primary" id="agregar">
                                    Registrar nueva solicitud
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
        </div>
    </div>
</div>

{% endblock %}
{% block javascript %}
    <script src='{% static "maingui/js/app/FormFunctions.js" %}'></script>
    <script src="{% static 'dashboard/js/app/modal.js' %}"></script>
    <script>
        $( document ).ready(function() {
            
            add_url = "{% url 'add_datos' %}";
            get_url = "{% url 'get_datos' datos_id=0 %}";
            get_llamadas_url = "{% url 'get_llamadas' %}";
            get_cedula_url = "{% url 'get_cedula' %}";
            replace_url = "{% url 'replace_datos' datos_id=0 %}";
            update_url = "{% url 'update_datos' datos_id=0 %}";
            get_url = get_url.slice(0, -1);
            replace_url = replace_url.slice(0, -1);
            update_url = update_url.slice(0, -1);
            repeat = true;

            const repeatCalls = setInterval(function(){
                if(repeat) getLlamadas();
            }, 1000);

            $('#editar').click(function(){
                window.location = update_url;
            });

            $('#buscar').click(function(){
                buscarCedula();
            });
        });
    </script>
{% endblock %}

